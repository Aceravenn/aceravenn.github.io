<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puzzle muna tayo bebii!</title>
</head>
<body style="text-align: center; font-family: 'Arial', sans-serif; background-color: #ffe6f2; color: #ff66b2; padding: 20px;">

    <h2 style="font-size: 26px; text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 10px #ff99cc, 0 0 20px #ff66b2;">
        Solve the Puzzle to unlock my present!
    </h2>

    <div id="puzzle-container" style="
        display: grid; 
        grid-template-columns: repeat(4, 100px); 
        grid-template-rows: repeat(4, 100px); 
        gap: 5px; 
        margin: 20px auto; 
        width: 420px; 
        padding: 10px; 
        background: linear-gradient(135deg, #ffccff, #ff99cc); 
        border-radius: 15px; 
        box-shadow: 0 0 20px #ff66b2;">
    </div>

    <p id="message" style="font-size: 22px; margin-top: 15px; text-shadow: 0 0 10px #ff66b2;"></p>

    <script>
        const gridSize = 4;
        let tiles = [...Array(gridSize * gridSize).keys()];
        tiles.pop();
        tiles.push(null);

        function shuffle() {
            do {
                tiles = [...Array(gridSize * gridSize).keys()];
                tiles.pop();
                tiles.push(null);
                tiles.sort(() => Math.random() - 0.5);
            } while (!isSolvable(tiles));
        }

        function isSolvable(arr) {
            let inversions = 0;
            const flatArray = arr.filter(n => n !== null);
            for (let i = 0; i < flatArray.length; i++) {
                for (let j = i + 1; j < flatArray.length; j++) {
                    if (flatArray[i] > flatArray[j]) inversions++;
                }
            }
            const emptyRow = Math.floor(arr.indexOf(null) / gridSize);
            return (gridSize % 2 === 1) ? inversions % 2 === 0 : (inversions + emptyRow) % 2 === 1;
        }

        function renderPuzzle() {
            const container = document.getElementById("puzzle-container");
            container.innerHTML = "";
            tiles.forEach((number, index) => {
                const tile = document.createElement("div");
                tile.style = `
                    width: 100px; 
                    height: 100px; 
                    background: linear-gradient(145deg, #ff66b2, #ff99cc); 
                    border: 3px solid #ff33a6; 
                    display: flex; 
                    align-items: center; 
                    justify-content: center; 
                    font-size: 26px; 
                    font-weight: bold; 
                    color: white; 
                    text-shadow: 0 0 10px white; 
                    cursor: pointer; 
                    transition: transform 0.3s ease, box-shadow 0.3s ease; 
                    border-radius: 10px;
                `;

                if (number === null) {
                    tile.style.background = "transparent";
                    tile.style.border = "none";
                    tile.style.cursor = "default";
                } else {
                    tile.innerText = number + 1;

                    // Add hover effect using JavaScript
                    tile.addEventListener("mouseover", () => {
                        tile.style.transform = "scale(1.1) translateY(-5px)";
                        tile.style.boxShadow = "0 0 15px #ff33a6";
                    });

                    tile.addEventListener("mouseout", () => {
                        tile.style.transform = "scale(1)";
                        tile.style.boxShadow = "none";
                    });

                    tile.addEventListener("click", () => moveTile(index));
                }
                container.appendChild(tile);
            });
        }

        function moveTile(index) {
            const emptyIndex = tiles.indexOf(null);
            const validMoves = [
                emptyIndex - 1, emptyIndex + 1, emptyIndex - gridSize, emptyIndex + gridSize
            ];

            if (validMoves.includes(index)) {
                [tiles[emptyIndex], tiles[index]] = [tiles[index], tiles[emptyIndex]];
                renderPuzzle();
                checkWin();
            }
        }

        function checkWin() {
            const solved = [...Array(gridSize * gridSize).keys()];
            solved.pop();
            solved.push(null);

            if (JSON.stringify(tiles) === JSON.stringify(solved)) {
                document.getElementById("message").innerHTML = "✨ Ang galing talaga ng baby ko! dahil dyan, mwahh mwahh ka sakin... ✨";
                setTimeout(() => {
                    window.location.href = " https://aceravenn.github.io/aceraven.github.io/"; // Change to your redirect link
                }, 2000);
            }
        }

        shuffle();
        renderPuzzle();
    </script>

</body>
</html>